with_entries(if (.value | type) == "object" then .value = (.value | if .fn then .n = .fn else . end | if .ln then if .n then .n = .n + " " + .ln else .n = .ln end else . end | with_entries(if .key == "d" then {"key": "dob", "value": .value} else . end | select(.value != "" and .value != "null" and .value != "blank" and (.key | test("x\\d+$") | not) and .key != "fn" and .key != "ln" and (.value | test("^,+$") | not))) | if .e then .d = (.e | split("@")[1]) else . end) else . end)
